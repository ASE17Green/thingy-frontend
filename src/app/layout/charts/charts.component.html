<div [@routerTransition]>
    <app-page-header [heading]="'Sensordata Overview'" [icon]="'fa-bar-chart'"></app-page-header>
    <div class="row">
        <div class="col col-sm-12">
            <div class="card mb-3">
                <div class="card-header">
                    Generated Data Table
                </div>
                <div class="card-block">
                    <table class="table table-striped table-responsive">
                        <thead>
                            <tr>
                                <th (click)="sort('date')">Date
                                    <span class="fa" [ngClass]="{'fa-sort-asc':reverse && key =='date',
                                    'fa-sort-desc':!reverse && key =='date', 'fa-sort': key != 'date'}">
                                    </span>
                                </th>
                                <th>Thingy Id</th>
                                <th>User</th>
                                <th (click)="sort('temperature')">Temperature [CÂ°]
                                    <span class="fa" [ngClass]="{'fa-sort-asc':reverse && key =='temperature',
                                    'fa-sort-desc':!reverse && key =='temperature', 'fa-sort': key != 'temperature'}">
                                    </span>
                                </th>
                                <th (click)="sort('pressure')">Pressure
                                    <span class="fa" [ngClass]="{'fa-sort-asc':reverse && key =='pressure',
                                    'fa-sort-desc':!reverse && key =='pressure', 'fa-sort': key != 'pressure'}">
                                    </span>
                                </th>
                                <th>Humidity</th>
                                <th>Eco2</th>
                                <th>Tvoc</th>
                                <th>Color Red</th>
                                <th>Color Green</th>
                                <th>Color Blue</th>
                                <th>Color Alpha</th>
                                <th>Button</th>
                                <th>Tap Direction</th>
                                <th>Tap Count</th>
                                <th>Orientation</th>
                                <th>Gyroscope X</th>
                                <th>Gyroscope Y</th>
                                <th>Gyroscope Z</th>
                                <th>Latitude</th>
                                <th>Longitude</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let thingy of thingyData | orderBy: key : reverse | paginate: { itemsPerPage: 5, currentPage: p }">
                                <td>{{ thingy.date | date: 'dd/MM/yy, hh:mm:ss'}}</td>
                                <td>{{ thingy.thingyID }}</td>
                                <td>{{ thingy.user?.email }}</td>
                                <td>{{ thingy.temperature }}</td>
                                <td>{{ thingy.pressure }}</td>
                                <td>{{ thingy.humidity }}</td>
                                <td>{{ thingy.eco2 }}</td>
                                <td>{{ thingy.tvoc }}</td>
                                <td>{{ thingy.colorRed }}</td>
                                <td>{{ thingy.colorGreen }}</td>
                                <td>{{ thingy.colorBlue }}</td>
                                <td>{{ thingy.colorAlpha }}</td>
                                <td>{{ thingy.button }}</td>
                                <td>{{ thingy.tapDirection }}</td>
                                <td>{{ thingy.tapCount }}</td>
                                <td>{{ thingy.orientation }}</td>
                                <td>{{ thingy.gyroscopeX }}</td>
                                <td>{{ thingy.gyroscopeY }}</td>
                                <td>{{ thingy.gyroscopeZ }}</td>
                                <td>{{ thingy.latitude }}</td>
                                <td>{{ thingy.longitude }}</td>
                            </tr>
                        </tbody>
                        <pagination-controls (pageChange)="p = $event"></pagination-controls>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
    </div>

    <div class="row">
        <div class="col col-sm-3">
            <div class="card mb-3">
                <div class="card-header">
                    Temperature
                </div>
                <ngx-gauge [type]="gaugeType"
                           [value]="gaugeValue"
                           [label]="gaugeLabel"
                           [append]="gaugeAppendText"
                           [thresholds]="thresholdConfig"
                           [duration]="1"
                           [thick]="10">
                </ngx-gauge>
            </div>
        </div>
        <div class="col col-sm-3">
            <div class="card mb-3">
                <div class="card-header">
                    Air Quality
                </div>
                <ngx-gauge [type]="gaugeType"
                           [value]="gaugeValue"
                           [label]="gaugeLabel"
                           [append]="gaugeAppendText"
                           [thresholds]="thresholdConfig"
                           [duration]="1"
                           [thick]="10">
                </ngx-gauge>
            </div>
        </div>
        <div class="col col-sm-3">
            <div class="card mb-3">
                <div class="card-header">
                    RGB
                </div>
                <ngx-gauge [type]="gaugeType"
                           [value]="gaugeValue"
                           [label]="gaugeLabel"
                           [append]="gaugeAppendText"
                           [thresholds]="thresholdConfig"
                           [duration]="1"
                           [thick]="10">
                </ngx-gauge>
            </div>
        </div>
        <div class="col col-sm-3">
            <div class="card mb-3">
                <div class="card-header">
                    LoL
                </div>
                <ngx-gauge [type]="gaugeType"
                           [value]="gaugeValue"
                           [label]="gaugeLabel"
                           [append]="gaugeAppendText"
                           [thresholds]="thresholdConfig"
                           [duration]="1"
                           [thick]="10">
                </ngx-gauge>
            </div>
        </div>
    </div>
    <div class="row" id="test">
        <div class="col-sm-9">
            <div class="card mb-3">
                <div class="card-header">
                    Current Location
                </div>
                <div class="card-block">
                    <agm-map [latitude]="latMap" [longitude]="lngMap" [zoom]="12">
                        <agm-marker [latitude]="latMarker" [longitude]="lngMarker"></agm-marker>
                        <!--
                        <agm-polyline>
                            <agm-polyline-point [latitude]="latPoly1" [longitude]="lngPoly1"></agm-polyline-point>
                            <agm-polyline-point [latitude]="latPoly2" [longitude]="lngPoly2"></agm-polyline-point>
                            <agm-polyline-point [latitude]="latPoly3" [longitude]="lngPoly3"></agm-polyline-point>
                        </agm-polyline>
                        -->
                    </agm-map>
                </div>
            </div>
        </div>
        <div class="col col-sm-3">
            <div class="card mb-3">
                <div class="card-header">
                    Data Randomizer
                </div>
                <div class="card-block">
                    <button class="btn rounded-btn" (click)="RandomizeGauge()">Randomize</button>
                </div>
            </div>
        </div>
    </div>
</div>
